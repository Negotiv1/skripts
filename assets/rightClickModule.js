(function () {
    'use strict';
    const _0x18d52c = 'Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBDb21iaW5lZCBTY3JpcHQ6IERyYWdnYWJsZVRhYmJlZE1lbnUgKyBDdXN0b20gQ3Vyc29yICsgQXV0byBFIExhZyDQs9C+0YLQvtCy0YvQuTEKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAxLjQuMgovLyBAZGVzY3JpcHRpb24gIFNjcmlwdCB3aXRoIHRhYnMsIGF1dG8gZnVuY3Rpb25zIChpbmNsdWRpbmcgQXV0byBFIExhZyBtb2RlKSwgRlBTLCBsb2dnaW5nLCBtZW51IHNldHRpbmdzLCBhbmQgY3VzdG9tIGN1cnNvci4KLy8gQG1hdGNoICAgICAgICAqOi8vZHluYXN0LmlvLyoKLy8gQG1hdGNoICAgICAgICAqOi8vbmlnaHRseS5keW5hc3QuY2xvdWQvKgovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgJ3VzZSBzdHJpY3QnOwogICAgLy8gPT09PT09PT09PT09PT09PT09PT0gR0xPQkFMIFZBUklBQkxFUyA9PT09PT09PT09PT09PT09PT09PQogICAgLy8gLS0tIEF1dG8gR0ggLS0tCiAgICBsZXQgYXV0b0dIRW5hYmxlZCA9IGZhbHNlOwogICAgbGV0IGF1dG9HSEtleSA9ICdGJzsKICAgIGxldCBhd2FpdGluZ0dIS2V5ID0gZmFsc2U7CgogICAgLy8gLS0tIEF1dG8gTGVhdmUgLS0tCiAgICBsZXQgYXV0b0xlYXZlRW5hYmxlZCA9IGZhbHNlOwogICAgbGV0IGF1dG9MZWF2ZUFjdGl2ZSA9IGZhbHNlOwogICAgbGV0IGF1dG9MZWF2ZUludGVydmFsID0gbnVsbDsKCiAgICAvLyAtLS0gQXV0byBFIChOb3JtYWwgbW9kZSkgLS0tCiAgICBsZXQgYXV0b0VTcGVlZEVuYWJsZWQgPSBmYWxzZTsKICAgIGxldCBpc1J1bm5pbmcgPSBmYWxzZTsgICAgICAgICAgIC8vIGZvciBub3JtYWwgbW9kZSBBdXRvIEUKICAgIHdpbmRvdy5hdXRvRUtleSA9ICIgIjsgICAgICAgICAgIC8vIHRyaWdnZXIgZm9yIEF1dG8gRSAoU3BhY2Ugb3IgTW91c2VSaWdodCkKICAgIGNvbnN0IE5PUk1BTF9JTlRFUlZBTCA9IDEwOwogICAgbGV0IGludGVydmFsSWQgPSBudWxsOwogICAgbGV0IGtleVByZXNzQ291bnQgPSAwOwogICAgbGV0IGF3YWl0aW5nUmVzZXRLZXkgPSBmYWxzZTsKICAgIHdpbmRvdy5hdXRvUmVzZXRLZXkgPSAncic7CgogICAgLy8gLS0tIFNwZWVkIEhhY2sgLS0tCiAgICBsZXQgc3BlZWRIYWNrQWN0aXZlID0gZmFsc2U7CiAgICBsZXQgc3BlZWRIYWNrTXVsdGlwbGllciA9IDk5OTk5OTk5OTk7CiAgICBsZXQgc3BlZWRNdWx0aXBsaWVyID0gMTsKCiAgICAvLyBBZGRpdGlvbmFsIHBhcmFtZXRlcnMKICAgIGxldCBzcGVlZEluY3JlYXNlID0geyBlbmFibGVkOiB0cnVlLCBzaG93QWxlcnQ6IHRydWUgfTsKICAgIGxldCBkZWxheVVzID0gMDsKICAgIHdpbmRvdy5tc0xvd2VyID0geyBlbmFibGVkOiB0cnVlLCBzaG93QWxlcnQ6IHRydWUgfTsKICAgIHdpbmRvdy5mcHNDb250cm9sID0gdHJ1ZTsKICAgIHdpbmRvdy5jcHNDb250cm9sID0gdHJ1ZTsKICAgIHdpbmRvdy5ib29zdFBhY2sgPSB0cnVlOwogICAgd2luZG93LmVQZXJTZWNvbmQgPSA0MDA7IC8vIHVzZWQgb25seSBpbiBBdXRvIEUgTGFnIG1vZGUKCiAgICAvLyBGb3IgY3VzdG9tIGN1cnNvciAod2lsbCBiZSB1c2VkIGluIFBhcnQgMTIpCiAgICBsZXQgY3VycmVudEN1cnNvclVybCA9ICdodHRwczovL2N1ci5jdXJzb3JzLTR1Lm5ldC9jdXJzb3JzL2N1ci0xL2N1cjc0LmN1cic7CiAgICBjb25zdCBob3RzcG90WCA9IDA7CiAgICBjb25zdCBob3RzcG90WSA9IDA7CgogICAgLy8gLS0tIEF1dG8gRSBMYWcgKE5ldyBtb2RlIHdpdGggYWRkaXRpb25hbCBjb21wdXRhdGlvbnMpIC0tLQogICAgbGV0IGlzTGFnUnVubmluZyA9IGZhbHNlOwogICAgbGV0IGxhZ0ludGVydmFsSWQgPSBudWxsOwogICAgY29uc3QgbGFnQ2FjaGUgPSBuZXcgTWFwKCk7CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT0gU1RZTEVTID09PT09PT09PT09PT09PT09PT09CiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGAKICAgIC8qIEdlbmVyYWwgbWVudSBzdHlsaW5nICovCiAgICAjZHJhZ2dhYmxlTWVudSB7CiAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgIHRvcDogNTAlOwogICAgICAgIGxlZnQ6IDUwJTsKICAgICAgICB3aWR0aDogNjAwcHg7CiAgICAgICAgYmFja2dyb3VuZDogIzFlMWUxZTsKICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNDQ0OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICAgICAgICB6LWluZGV4OiA5OTk5OwogICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgICAgIGZvbnQtZmFtaWx5OiBTZWdvZSBVSSwgVGFob21hLCBzYW5zLXNlcmlmOwogICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CiAgICAvKiBEcmFnZ2FibGUgaGVhZGVyICovCiAgICAjbWVudUhlYWRlciB7CiAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7CiAgICAgICAgYmFja2dyb3VuZDogIzJiMmIyYjsKICAgICAgICBjdXJzb3I6IG1vdmU7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzU1NTsKICAgIH0KICAgICNtZW51SGVhZGVyIC50aXRsZSB7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgfQogICAgI2Nsb3NlTWVudSB7CiAgICAgICAgYmFja2dyb3VuZDogIzMzMzsKICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICB9CiAgICAjY2xvc2VNZW51OmhvdmVyIHsKICAgICAgICBiYWNrZ3JvdW5kOiAjNDQ0OwogICAgfQogICAgLyogVGFicyAqLwogICAgI3RhYkJhciB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBnYXA6IDZweDsKICAgICAgICBtYXJnaW46IDEwcHg7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM1NTU7CiAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDsKICAgIH0KICAgIC50YWJCdXR0b24gewogICAgICAgIGJhY2tncm91bmQ6ICMyYjJiMmI7CiAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgIHBhZGRpbmc6IDZweCAxMnB4OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIH0KICAgIC50YWJCdXR0b246aG92ZXIgewogICAgICAgIGJhY2tncm91bmQ6ICMzYTNhM2E7CiAgICB9CiAgICAudGFiQnV0dG9uLmFjdGl2ZSB7CiAgICAgICAgYmFja2dyb3VuZDogIzUwNTA1MDsKICAgIH0KICAgIC8qIFRhYiBjb250ZW50ICovCiAgICAudGFiQ29udGVudCB7CiAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICBwYWRkaW5nOiAxMHB4IDE1cHg7CiAgICB9CiAgICAudGFiQ29udGVudC5hY3RpdmUgewogICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgfQogICAgLyogQmxvY2tzIGluc2lkZSB0YWJzICovCiAgICAudGFiQmxvY2sgewogICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzU1NTsKICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgICAgcGFkZGluZzogMTBweDsKICAgICAgICBiYWNrZ3JvdW5kOiAjMmIyYjJiOwogICAgfQogICAgLnRhYkJsb2NrIGgzIHsKICAgICAgICBtYXJnaW46IDAgMCAxMHB4IDA7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDQ0OwogICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7CiAgICB9CiAgICAudGFiQmxvY2sgbGFiZWwgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgIG1hcmdpbjogNnB4IDA7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIH0KICAgIC50YWJCbG9jayBpbnB1dFt0eXBlPSJjaGVja2JveCJdLAogICAgLnRhYkJsb2NrIGlucHV0W3R5cGU9Im51bWJlciJdLAogICAgLnRhYkJsb2NrIHNlbGVjdCB7CiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjIpOwogICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7CiAgICB9CiAgICAudGFiQmxvY2sgYnV0dG9uIHsKICAgICAgICBiYWNrZ3JvdW5kOiAjMzMzOwogICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICBwYWRkaW5nOiA1cHggMTBweDsKICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICBtYXJnaW4tbGVmdDogOHB4OwogICAgfQogICAgLnRhYkJsb2NrIGJ1dHRvbjpob3ZlciB7CiAgICAgICAgYmFja2dyb3VuZDogIzQ0NDsKICAgIH0KICAgIGA7CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgIC8vID09PT09PT09PT09PT09PT09PT09IENSRUFUSU5HIE1FTlUgKEhUTUwpID09PT09PT09PT09PT09PT09PT09CiAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBtZW51LmlkID0gJ2RyYWdnYWJsZU1lbnUnOwoKICAgIC8vIERyYWdnYWJsZSBoZWFkZXIKICAgIGNvbnN0IG1lbnVIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIG1lbnVIZWFkZXIuaWQgPSAnbWVudUhlYWRlcic7CiAgICBtZW51SGVhZGVyLmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJ0aXRsZSI+U2NyaXB0IE1lbnU8L2Rpdj4KICAgICAgICA8YnV0dG9uIGlkPSJjbG9zZU1lbnUiPlg8L2J1dHRvbj4KICAgIGA7CiAgICBtZW51LmFwcGVuZENoaWxkKG1lbnVIZWFkZXIpOwoKICAgIC8vIFRhYiBidXR0b25zIGJsb2NrCiAgICBjb25zdCB0YWJCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRhYkJhci5pZCA9ICd0YWJCYXInOwogICAgdGFiQmFyLmlubmVySFRNTCA9IGAKICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWJCdXR0b24gYWN0aXZlIiBkYXRhLXRhYj0idGFiQXV0byI+QXV0bzwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYkJ1dHRvbiIgZGF0YS10YWI9InRhYkFpbSI+QWltPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiQnV0dG9uIiBkYXRhLXRhYj0idGFiVmlzdWFsIj5WaXN1YWw8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWJCdXR0b24iIGRhdGEtdGFiPSJ0YWJab29tIj5ab29tPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiQnV0dG9uIiBkYXRhLXRhYj0idGFiU2V0dGluZ3MiPlNldHRpbmdzPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiQnV0dG9uIiBkYXRhLXRhYj0idGFiTG9nIj5Mb2c8L2J1dHRvbj4KICAgIGA7CiAgICBtZW51LmFwcGVuZENoaWxkKHRhYkJhcik7CiAgICAvLyBUYWIgIkF1dG8iCiAgICBjb25zdCB0YWJBdXRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0YWJBdXRvLmNsYXNzTmFtZSA9ICd0YWJDb250ZW50IGFjdGl2ZSc7CiAgICB0YWJBdXRvLmlkID0gJ3RhYkF1dG8nOwogICAgdGFiQXV0by5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBjbGFzcz0idGFiQmxvY2siPgogICAgICAgICAgICA8aDM+QXV0byBGdW5jdGlvbnM8L2gzPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IkF1dG9tYXRpY2FsbHkgYWN0aXZhdGVzIEdIIG1vZGUgd2hlbiB0aGUgc2VsZWN0ZWQga2V5IGlzIHByZXNzZWQiPgogICAgICAgICAgICAgICAgPHNwYW4+QXV0byBHSDwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImF1dG9HSFRvZ2dsZSI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYXV0b0dIS2V5QnV0dG9uIj5GPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0iQXV0b21hdGljYWxseSBwZXJmb3JtcyB0aGUgTGVhdmUgY29tbWFuZCB3aGVuIEYyIGlzIHByZXNzZWQiPgogICAgICAgICAgICAgICAgPHNwYW4+QXV0byBMZWF2ZSAoRjIpPC9zcGFuPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iYXV0b0xlYXZlVG9nZ2xlIj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJCbG9jayI+CiAgICAgICAgICAgIDxoMz5BdXRvIEU8L2gzPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IkNob29zZSB0cmlnZ2VyIGZvciBBdXRvIEUiPgogICAgICAgICAgICAgICAgPHNwYW4+QXV0byBFIFRyaWdnZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJhdXRvRUtleVNlbGVjdCI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iICIgc2VsZWN0ZWQ+U3BhY2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNb3VzZVJpZ2h0Ij5SaWdodCBNb3VzZSBCdXR0b248L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IkluY3JlYXNlcyB0aGUgc3BlZWQgb2YgZXhlY3V0aW5nIHRoZSBFIGNvbW1hbmQiPgogICAgICAgICAgICAgICAgPHNwYW4+SGlnaCBTcGVlZCBBdXRvIEU8L3NwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJhdXRvRVNwZWVkVG9nZ2xlIj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJTZXQgYSBjdXN0b20gaW50ZXJ2YWwgZm9yIEF1dG8gRSAobXMpIj4KICAgICAgICAgICAgICAgIDxzcGFuPkN1c3RvbSBBdXRvIEUgSW50ZXJ2YWwgKG1zKTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJjdXN0b21JbnRlcnZhbCIgdmFsdWU9IjEwIiBzdHlsZT0id2lkdGg6IDgwcHg7Ij4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJOdW1iZXIgb2YgJ2UnIHByZXNzZXMgcGVyIGN5Y2xlIj4KICAgICAgICAgICAgICAgIDxzcGFuPlByZXNzZXMgcGVyIGN5Y2xlPC9zcGFuPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImVQcmVzc2VzUGVyQ3ljbGUiIHZhbHVlPSIxMCIgc3R5bGU9IndpZHRoOiA4MHB4OyI+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0iRW5hYmxlcyBhZGRpdGlvbmFsIGNvbXB1dGF0aW9ucyB0byBzaW11bGF0ZSBsYWciPgogICAgICAgICAgICAgICAgPHNwYW4+QXV0byBFIExhZzwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImF1dG9FTGFnVG9nZ2xlIj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJCbG9jayI+CiAgICAgICAgICAgIDxoMz5TcGVlZCBIYWNrPC9oMz4KICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJBY3RpdmF0ZXMgZ2FtZSBzcGVlZC11cCB3aGVuIHRoZSByaWdodCBtb3VzZSBidXR0b24gaXMgaGVsZCBkb3duIj4KICAgICAgICAgICAgICAgIDxzcGFuPlNwZWVkIEhhY2sgRTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InNwZWVkSGFja1RvZ2dsZSI+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0iU2V0IHNwZWVkIGhhY2sgbXVsdGlwbGllciAoZGVmYXVsdCA5OTk5OTk5OTk5KSI+CiAgICAgICAgICAgICAgICA8c3Bhbj5TcGVlZCBIYWNrIE11bHRpcGxpZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic3BlZWRIYWNrTXVsdGlwbGllciIgdmFsdWU9Ijk5OTk5OTk5OTkiIHN0eWxlPSJ3aWR0aDogMTMwcHg7Ij4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgIGA7CiAgICBtZW51LmFwcGVuZENoaWxkKHRhYkF1dG8pOwogICAgLy8gVGFiICJBaW0iCiAgICBjb25zdCB0YWJBaW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRhYkFpbS5jbGFzc05hbWUgPSAndGFiQ29udGVudCc7CiAgICB0YWJBaW0uaWQgPSAndGFiQWltJzsKICAgIHRhYkFpbS5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBjbGFzcz0idGFiQmxvY2siPgogICAgICAgICAgICA8aDM+QWltIEZ1bmN0aW9ucyAoRXhhbXBsZSk8L2gzPgogICAgICAgICAgICA8cD5BaW0gc2V0dGluZ3MgY291bGQgZ28gaGVyZS4uLjwvcD4KICAgICAgICA8L2Rpdj4KICAgIGA7CiAgICBtZW51LmFwcGVuZENoaWxkKHRhYkFpbSk7CiAgICAvLyBUYWIgIlZpc3VhbCIKICAgIGNvbnN0IHRhYlZpc3VhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgdGFiVmlzdWFsLmNsYXNzTmFtZSA9ICd0YWJDb250ZW50JzsKICAgIHRhYlZpc3VhbC5pZCA9ICd0YWJWaXN1YWwnOwogICAgdGFiVmlzdWFsLmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJCbG9jayI+CiAgICAgICAgICAgIDxoMz5WaXN1YWwgRnVuY3Rpb25zPC9oMz4KICAgICAgICAgICAgPHA+VmlzdWFsIHNldHRpbmdzIGNvdWxkIGdvIGhlcmUuLi48L3A+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGFiQmxvY2siPgogICAgICAgICAgICA8aDM+Q3VzdG9tIEN1cnNvcjwvaDM+CiAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0iQ2hvb3NlIGN1cnNvciI+CiAgICAgICAgICAgICAgICA8c3Bhbj5DdXJzb3IgU2VsZWN0aW9uPC9zcGFuPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iY3Vyc29yU2VsZWN0Ij4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJodHRwczovL2N1ci5jdXJzb3JzLTR1Lm5ldC9jdXJzb3JzL2N1ci0xL2N1cjc0LmN1ciI+Q3Vyc29yIDE8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJodHRwczovL2N1ci5jdXJzb3JzLTR1Lm5ldC9jdXJzb3JzL2N1ci0yL2N1cjE1Ni5jdXIiPkN1cnNvciAyPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iaHR0cHM6Ly9jdXIuY3Vyc29ycy00dS5uZXQvY3Vyc29ycy9jdXItMi9jdXIxNDAuY3VyIj5DdXJzb3IgMzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Imh0dHBzOi8vY3VyLmN1cnNvcnMtNHUubmV0L2N1cnNvcnMvY3VyLTEvY3VyNzcuY3VyIj5DdXJzb3IgNDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Imh0dHBzOi8vY3VyLmN1cnNvcnMtNHUubmV0L2N1cnNvcnMvY3VyLTIvY3VyMjI3LmN1ciI+Q3Vyc29yIDU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgIDwvZGl2PgogICAgYDsKICAgIG1lbnUuYXBwZW5kQ2hpbGQodGFiVmlzdWFsKTsKICAgIC8vIFRhYiAiWm9vbSIKICAgIGNvbnN0IHRhYlpvb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRhYlpvb20uY2xhc3NOYW1lID0gJ3RhYkNvbnRlbnQnOwogICAgdGFiWm9vbS5pZCA9ICd0YWJab29tJzsKICAgIHRhYlpvb20uaW5uZXJIVE1MID0gYAogICAgICAgIDxkaXYgY2xhc3M9InRhYkJsb2NrIj4KICAgICAgICAgICAgPGgzPlpvb20gKEV4YW1wbGUpPC9oMz4KICAgICAgICAgICAgPHA+Wm9vbSBzZXR0aW5ncyBjb3VsZCBnbyBoZXJlLi4uPC9wPgogICAgICAgIDwvZGl2PgogICAgYDsKICAgIG1lbnUuYXBwZW5kQ2hpbGQodGFiWm9vbSk7CiAgICAvLyBUYWIgIlNldHRpbmdzIgogICAgY29uc3QgdGFiU2V0dGluZ3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRhYlNldHRpbmdzLmNsYXNzTmFtZSA9ICd0YWJDb250ZW50JzsKICAgIHRhYlNldHRpbmdzLmlkID0gJ3RhYlNldHRpbmdzJzsKICAgIHRhYlNldHRpbmdzLmlubmVySFRNTCA9IGAKICAgICAgICA8ZGl2IGNsYXNzPSJ0YWJCbG9jayI+CiAgICAgICAgICAgIDxoMz5NZW51IFNldHRpbmdzPC9oMz4KICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJTZWxlY3QgY29sb3IgdGhlbWUiPgogICAgICAgICAgICAgICAgPHNwYW4+Q29sb3IgVGhlbWU8L3NwYW4+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJ0aGVtZVNlbGVjdCI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGFyayIgc2VsZWN0ZWQ+RGFyazwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNvbG9yZnVsIj5Db2xvcmZ1bDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbCB0aXRsZT0iTWVudSB3aWR0aCAocHgpIj4KICAgICAgICAgICAgICAgIDxzcGFuPk1lbnUgV2lkdGggKHB4KTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJtZW51V2lkdGgiIHZhbHVlPSI2MDAiIHN0eWxlPSJ3aWR0aDogODBweDsiPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9Ik1lbnUgb3BhY2l0eSAoMC0xKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj5NZW51IE9wYWNpdHkgKDAtMSk8L3NwYW4+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjEiIGlkPSJtZW51T3BhY2l0eSIgdmFsdWU9IjEiIHN0eWxlPSJ3aWR0aDogODBweDsiPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IlJlc2V0IG1lbnUgcG9zaXRpb24iPgogICAgICAgICAgICAgICAgPHNwYW4+TWVudSBQb3NpdGlvbjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InJlc2V0TWVudVBvc2l0aW9uIj5SZXNldDwvYnV0dG9uPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgdGl0bGU9IlJlc2V0IGFsbCBzZXR0aW5ncyB0byBkZWZhdWx0IHZhbHVlcyI+CiAgICAgICAgICAgICAgICA8c3Bhbj5SZXNldCBTZXR0aW5nczwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InJlc2V0QWxsU2V0dGluZ3MiPkRlZmF1bHQgUmVzZXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGxhYmVsIHRpdGxlPSJTZWxlY3QgcmVzZXQga2V5IGZvciBBdXRvIEUiPgogICAgICAgICAgICAgICAgPHNwYW4+UmVzZXQgS2V5PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0icmVzZXRLZXlCdXR0b24iPlI8L2J1dHRvbj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICA8L2Rpdj4KICAgIGA7CiAgICBtZW51LmFwcGVuZENoaWxkKHRhYlNldHRpbmdzKTsKICAgIC8vIFRhYiAiTG9nIgogICAgY29uc3QgdGFiTG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0YWJMb2cuY2xhc3NOYW1lID0gJ3RhYkNvbnRlbnQnOwogICAgdGFiTG9nLmlkID0gJ3RhYkxvZyc7CiAgICB0YWJMb2cuaW5uZXJIVE1MID0gYAogICAgICAgIDxkaXYgY2xhc3M9InRhYkJsb2NrIj4KICAgICAgICAgICAgPGgzPkFjdGlvbiBMb2cgLyBTdGF0czwvaDM+CiAgICAgICAgICAgIDxkaXYgaWQ9ImxvZ0NvbnRhaW5lciIgc3R5bGU9Im1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBiYWNrZ3JvdW5kOiAjMmIyYjJiOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlcjogMXB4IHNvbGlkICM1NTU7Ij48L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iY2xlYXJMb2dCdXR0b24iIHN0eWxlPSJtYXJnaW4tdG9wOiAxMHB4OyI+Q2xlYXIgTG9nPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICBgOwogICAgbWVudS5hcHBlbmRDaGlsZCh0YWJMb2cpOwogICAgLy8gQWRkaW5nIGZvb3RlciB0byBtZW51IChuZXJlc3QgYW5kIHZlcnNpb24pCiAgICBjb25zdCBtZW51Rm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBtZW51Rm9vdGVyLmlkID0gJ21lbnVGb290ZXInOwogICAgbWVudUZvb3Rlci5zdHlsZS5jc3NUZXh0ID0gJ2ZvbnQtc2l6ZTogMTBweDsgY29sb3I6ICNhYWE7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiA1cHggMDsnOwogICAgbWVudUZvb3Rlci5pbm5lckhUTUwgPSAnbmVyZXN0IHwgdmVyc2lvbiAxLjEuMCc7CiAgICBtZW51LmFwcGVuZENoaWxkKG1lbnVGb290ZXIpOwoKICAgIC8vIEFwcGVuZCBtZW51IHRvIGRvY3VtZW50CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpOwogICAgLy8gPT09PT09PT09PT09PT09PT09PT0gVEFCIExPR0lDID09PT09PT09PT09PT09PT09PT09CiAgICBjb25zdCB0YWJCdXR0b25zID0gdGFiQmFyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJCdXR0b24nKTsKICAgIGNvbnN0IHRhYkNvbnRlbnRzID0gbWVudS5xdWVyeVNlbGVjdG9yQWxsKCcudGFiQ29udGVudCcpOwoKICAgIHRhYkJ1dHRvbnMuZm9yRWFjaChidG4gPT4gewogICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgdGFiQnV0dG9ucy5mb3JFYWNoKGIgPT4gYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgdGFiQ29udGVudHMuZm9yRWFjaCh0YyA9PiB0Yy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICAgIGNvbnN0IHRhcmdldFRhYiA9IGJ0bi5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiJyk7CiAgICAgICAgICAgIGNvbnN0IHRhcmdldENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRUYWIpOwogICAgICAgICAgICBpZiAodGFyZ2V0Q29udGVudCkgewogICAgICAgICAgICAgICAgdGFyZ2V0Q29udGVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSk7CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT0gTUVOVSBDTE9TRSBCVVRUT04gPT09PT09PT09PT09PT09PT09PT0KICAgIGNvbnN0IGNsb3NlTWVudUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZU1lbnUnKTsKICAgIGNsb3NlTWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9KTsKCiAgICAvLyBUb2dnbGUgbWVudSBkaXNwbGF5IHdpdGggSW5zZXJ0IGtleQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7CiAgICAgICAgaWYgKGUua2V5ID09PSAnSW5zZXJ0JykgewogICAgICAgICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSAobWVudS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgbWVudS5zdHlsZS5kaXNwbGF5ID09PSAnJykgPyAnYmxvY2snIDogJ25vbmUnOwogICAgICAgIH0KICAgIH0pOwogICAgLy8gPT09PT09PT09PT09PT09PT09PT0gTUVOVSBEUkFHR0lORyA9PT09PT09PT09PT09PT09PT09PQogICAgbGV0IG9mZnNldFggPSAwOwogICAgbGV0IG9mZnNldFkgPSAwOwogICAgbGV0IGlzRHJhZ2dpbmcgPSBmYWxzZTsKCiAgICBtZW51SGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7CiAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7CiAgICAgICAgb2Zmc2V0WCA9IGUuY2xpZW50WCAtIG1lbnUub2Zmc2V0TGVmdDsKICAgICAgICBvZmZzZXRZID0gZS5jbGllbnRZIC0gbWVudS5vZmZzZXRUb3A7CiAgICB9KTsKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZSkgPT4gewogICAgICAgIGlmIChpc0RyYWdnaW5nKSB7CiAgICAgICAgICAgIG1lbnUuc3R5bGUubGVmdCA9IChlLmNsaWVudFggLSBvZmZzZXRYKSArICdweCc7CiAgICAgICAgICAgIG1lbnUuc3R5bGUudG9wID0gKGUuY2xpZW50WSAtIG9mZnNldFkpICsgJ3B4JzsKICAgICAgICAgICAgbWVudS5zdHlsZS50cmFuc2Zvcm0gPSAnJzsgLy8gUmVtb3ZlIHRyYW5zZm9ybSB3aGlsZSBkcmFnZ2luZwogICAgICAgIH0KICAgIH0pOwoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoKSA9PiB7CiAgICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlOwogICAgfSk7CiAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBBVVRPIEdIID09PT09PT09PT09PT09PT09PT09CiAgICBsZXQgY3Vyc29yWCA9IDAsIGN1cnNvclkgPSAwOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGV2ZW50KSA9PiB7CiAgICAgICAgY3Vyc29yWCA9IGV2ZW50LmNsaWVudFg7CiAgICAgICAgY3Vyc29yWSA9IGV2ZW50LmNsaWVudFk7CiAgICB9KTsKCiAgICBmdW5jdGlvbiBwcmVzc0tleShrZXksIGNvZGUsIGtleUNvZGUpIHsKICAgICAgICBjb25zdCBldmVudE9wdGlvbnMgPSB7IGtleSwgY29kZSwga2V5Q29kZSwgd2hpY2g6IGtleUNvZGUsIGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfTsKICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgS2V5Ym9hcmRFdmVudCgia2V5ZG93biIsIGV2ZW50T3B0aW9ucykpOwogICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCJrZXl1cCIsIGV2ZW50T3B0aW9ucykpOwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIGNsaWNrQXRDdXJzb3IoKSB7CiAgICAgICAgY29uc3QgZGVsYXkgPSBtcyA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTsKICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChjdXJzb3JYLCBjdXJzb3JZKTsKICAgICAgICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudC5jbG9zZXN0KCcjZHJhZ2dhYmxlTWVudSwgLnVpLCAuZGlzYWJsZWQnKSkgewogICAgICAgICAgICBjb25zb2xlLndhcm4oIkVsZW1lbnQgaXMgaW5hY2Nlc3NpYmxlIG9yIGJsb2NrZWQhIik7CiAgICAgICAgICAgIGxvZ0FjdGlvbigiQ2xpY2sgYXR0ZW1wdDogRWxlbWVudCBpcyBpbmFjY2Vzc2libGUgb3IgYmxvY2tlZCEiLCAnd2FybicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGV2ZW50T3B0aW9ucyA9IHsKICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwKICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSwKICAgICAgICAgICAgYnV0dG9uOiAwLAogICAgICAgICAgICBjbGllbnRYOiBjdXJzb3JYLAogICAgICAgICAgICBjbGllbnRZOiBjdXJzb3JZCiAgICAgICAgfTsKICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoIm1vdXNlZG93biIsIGV2ZW50T3B0aW9ucykpOwogICAgICAgIGF3YWl0IGRlbGF5KDU0KTsKICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoIm1vdXNldXAiLCBldmVudE9wdGlvbnMpKTsKICAgIH0KCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgYXN5bmMgKGV2ZW50KSA9PiB7CiAgICAgICAgaWYgKGF3YWl0aW5nR0hLZXkpIHsKICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYXV0b0dIS2V5ID0gZXZlbnQua2V5Lmxlbmd0aCA9PT0gMSA/IGV2ZW50LmtleS50b1VwcGVyQ2FzZSgpIDogZXZlbnQua2V5OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b0dIS2V5QnV0dG9uJykudGV4dENvbnRlbnQgPSBhdXRvR0hLZXk7CiAgICAgICAgICAgIGF3YWl0aW5nR0hLZXkgPSBmYWxzZTsKICAgICAgICAgICAgbG9nQWN0aW9uKGBBdXRvIEdIIGtleSBjaGFuZ2VkIHRvICR7YXV0b0dIS2V5fWApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChldmVudC5rZXkudG9Mb3dlckNhc2UoKSA9PT0gYXV0b0dIS2V5LnRvTG93ZXJDYXNlKCkgJiYgYXV0b0dIRW5hYmxlZCkgewogICAgICAgICAgICBwcmVzc0tleSgiMCIsICJEaWdpdDAiLCA0OCk7CiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCA1NikpOwogICAgICAgICAgICBhd2FpdCBjbGlja0F0Q3Vyc29yKCk7CiAgICAgICAgICAgIHByZXNzS2V5KCIxIiwgIkRpZ2l0MSIsIDQ5KTsKICAgICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBhdXRvR0hUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b0dIVG9nZ2xlJyk7CiAgICBhdXRvR0hUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgIGF1dG9HSEVuYWJsZWQgPSBhdXRvR0hUb2dnbGUuY2hlY2tlZDsKICAgICAgICBsb2dBY3Rpb24oYEF1dG8gR0ggJHthdXRvR0hFbmFibGVkID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gKTsKICAgIH0pOwoKICAgIGNvbnN0IGF1dG9HSEtleUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvR0hLZXlCdXR0b24nKTsKICAgIGF1dG9HSEtleUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICBhd2FpdGluZ0dIS2V5ID0gdHJ1ZTsKICAgICAgICBhdXRvR0hLZXlCdXR0b24udGV4dENvbnRlbnQgPSAnUHJlc3MgYW55IGtleS4uLic7CiAgICAgICAgbG9nQWN0aW9uKCdXYWl0aW5nIGZvciBuZXcga2V5IGlucHV0IGZvciBBdXRvIEdIJyk7CiAgICB9KTsKCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBBVVRPIExFQVZFID09PT09PT09PT09PT09PT09PT09CiAgICBjb25zdCBPcmlnaW5hbFdlYlNvY2tldCA9IHdpbmRvdy5XZWJTb2NrZXQ7CiAgICBsZXQgd3NJbnN0YW5jZSA9IG51bGw7CiAgICB3aW5kb3cuV2ViU29ja2V0ID0gY2xhc3MgZXh0ZW5kcyBPcmlnaW5hbFdlYlNvY2tldCB7CiAgICAgICAgY29uc3RydWN0b3IoLi4uYXJncykgewogICAgICAgICAgICBzdXBlciguLi5hcmdzKTsKICAgICAgICAgICAgd3NJbnN0YW5jZSA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBsb2dBY3Rpb24oJ1dlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCcsICd3YXJuJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGUpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBlcnJvcjonLCBlKTsKICAgICAgICAgICAgICAgIGxvZ0FjdGlvbignV2ViU29ja2V0IGVycm9yJywgJ2Vycm9yJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CgogICAgZnVuY3Rpb24gc2VuZFBhY2tldChwYWNrZXQpIHsKICAgICAgICBpZiAoIXdzSW5zdGFuY2UgfHwgd3NJbnN0YW5jZS5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ1dlYlNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuIScpOwogICAgICAgICAgICBsb2dBY3Rpb24oJ0F0dGVtcHQgdG8gc2VuZCBwYWNrZXQ6IFdlYlNvY2tldCBub3Qgb3BlbiEnLCAnZXJyb3InKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KHBhY2tldCk7CiAgICAgICAgICAgIHdzSW5zdGFuY2Uuc2VuZChhcnJheSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHBhY2tldDonLCBlKTsKICAgICAgICAgICAgbG9nQWN0aW9uKGBQYWNrZXQgc2VuZGluZyBlcnJvcjogJHtlLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7CiAgICAgICAgfQogICAgfQoKICAgIGNvbnN0IHBhY2tldEdIID0gWzIzLCAzLCAzLCAwLCAzOCwgMCwgMCwgMF07CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7CiAgICAgICAgaWYgKGUua2V5ID09PSAnRjInICYmIGF1dG9MZWF2ZUVuYWJsZWQpIHsKICAgICAgICAgICAgYXV0b0xlYXZlQWN0aXZlID0gIWF1dG9MZWF2ZUFjdGl2ZTsKICAgICAgICAgICAgaWYgKGF1dG9MZWF2ZUFjdGl2ZSkgewogICAgICAgICAgICAgICAgYXV0b0xlYXZlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVLZXkoJ2UnKTsKICAgICAgICAgICAgICAgICAgICBzZW5kUGFja2V0KHBhY2tldEdIKTsKICAgICAgICAgICAgICAgIH0sIDUwKTsKICAgICAgICAgICAgICAgIGxvZ0FjdGlvbignQXV0byBMZWF2ZSBhY3RpdmF0ZWQnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYXV0b0xlYXZlSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgYXV0b0xlYXZlSW50ZXJ2YWwgPSBudWxsOwogICAgICAgICAgICAgICAgbG9nQWN0aW9uKCdBdXRvIExlYXZlIGRlYWN0aXZhdGVkJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICBmdW5jdGlvbiBzaW11bGF0ZUtleShrZXkpIHsKICAgICAgICBjb25zdCBldmVudE9wdGlvbnMgPSB7CiAgICAgICAgICAgIGtleSwKICAgICAgICAgICAgY29kZTogJ0tleScgKyBrZXkudG9VcHBlckNhc2UoKSwKICAgICAgICAgICAga2V5Q29kZToga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKSwKICAgICAgICAgICAgd2hpY2g6IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCksCiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsCiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUKICAgICAgICB9OwogICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCJrZXlkb3duIiwgZXZlbnRPcHRpb25zKSk7CiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoImtleXVwIiwgZXZlbnRPcHRpb25zKSk7CiAgICB9CgogICAgY29uc3QgYXV0b0xlYXZlVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9MZWF2ZVRvZ2dsZScpOwogICAgYXV0b0xlYXZlVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICBhdXRvTGVhdmVFbmFibGVkID0gYXV0b0xlYXZlVG9nZ2xlLmNoZWNrZWQ7CiAgICAgICAgbG9nQWN0aW9uKGBBdXRvIExlYXZlICR7YXV0b0xlYXZlRW5hYmxlZCA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YCk7CiAgICB9KTsKICAgIC8vID09PT09PT09PT09PT09PT09PT09IEFVVE8gRSAoTm9ybWFsIG1vZGUpID09PT09PT09PT09PT09PT09PT09CiAgICBjb25zdCBhdXRvRUtleVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvRUtleVNlbGVjdCcpOwogICAgY29uc3QgYXV0b0VTcGVlZFRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvRVNwZWVkVG9nZ2xlJyk7CiAgICBjb25zdCBjdXN0b21JbnRlcnZhbElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUludGVydmFsJyk7CgogICAgZnVuY3Rpb24gTXJOZWdvdGl2WFByb2Nlc3NvcigpIHsKICAgICAgICBpZiAoaXNSdW5uaW5nKSByZXR1cm47CiAgICAgICAgaXNSdW5uaW5nID0gdHJ1ZTsKICAgICAgICBsb2dBY3Rpb24oJ0F1dG8gRSBwcm9jZXNzIHN0YXJ0ZWQnKTsKICAgICAgICBjb25zdCBydW5Qcm9jZXNzb3IgPSAoKSA9PiB7CiAgICAgICAgICAgIGlmICghaXNSdW5uaW5nKSByZXR1cm47CiAgICAgICAgICAgIGxldCBlUHJlc3Nlc1BlckN5Y2xlID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VQcmVzc2VzUGVyQ3ljbGUnKS52YWx1ZSwgMTApOwogICAgICAgICAgICBpZiAoaXNOYU4oZVByZXNzZXNQZXJDeWNsZSkgfHwgZVByZXNzZXNQZXJDeWNsZSA8PSAwKSB7CiAgICAgICAgICAgICAgICBlUHJlc3Nlc1BlckN5Y2xlID0gMTA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlUHJlc3Nlc1BlckN5Y2xlOyBpKyspIHsKICAgICAgICAgICAgICAgIHNpbXVsYXRlS2V5KCdlJyk7CiAgICAgICAgICAgICAgICBrZXlQcmVzc0NvdW50Kys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgY3VzdG9tRGVsYXkgPSBwYXJzZUludChjdXN0b21JbnRlcnZhbElucHV0LnZhbHVlLCAxMCk7CiAgICAgICAgICAgIGNvbnN0IGRlbGF5VGltZSA9ICghaXNOYU4oY3VzdG9tRGVsYXkpICYmIGN1c3RvbURlbGF5ID4gMCkKICAgICAgICAgICAgICAgID8gY3VzdG9tRGVsYXkKICAgICAgICAgICAgICAgIDogKGF1dG9FU3BlZWRFbmFibGVkID8gMSA6IE5PUk1BTF9JTlRFUlZBTCk7CiAgICAgICAgICAgIGludGVydmFsSWQgPSBzZXRUaW1lb3V0KHJ1blByb2Nlc3NvciwgZGVsYXlUaW1lKTsKICAgICAgICB9OwogICAgICAgIHJ1blByb2Nlc3NvcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0b3BNck5lZ290aXZYUHJvY2Vzc29yKCkgewogICAgICAgIGlzUnVubmluZyA9IGZhbHNlOwogICAgICAgIGNsZWFyVGltZW91dChpbnRlcnZhbElkKTsKICAgICAgICBpbnRlcnZhbElkID0gbnVsbDsKICAgICAgICBsb2dBY3Rpb24oJ0F1dG8gRSBwcm9jZXNzIHN0b3BwZWQnKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBBVVRPIEUgTEFHIChOZXcgbW9kZSB3aXRoIGFkZGl0aW9uYWwgY29tcHV0YXRpb25zKSA9PT09PT09PT09PT09PT09PT09PQogICAgZnVuY3Rpb24gc2ltdWxhdGVFS2V5UHJlc3NMYWcoKSB7CiAgICAgICAgY29uc3Qga2V5RG93bkV2ZW50ID0gbmV3IEtleWJvYXJkRXZlbnQoImtleWRvd24iLCB7CiAgICAgICAgICAgIGtleTogImUiLCBrZXlDb2RlOiA2OSwgY29kZTogIktleUUiLCBidWJibGVzOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgY29uc3Qga2V5VXBFdmVudCA9IG5ldyBLZXlib2FyZEV2ZW50KCJrZXl1cCIsIHsKICAgICAgICAgICAga2V5OiAiZSIsIGtleUNvZGU6IDY5LCBjb2RlOiAiS2V5RSIsIGJ1YmJsZXM6IHRydWUKICAgICAgICB9KTsKICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChrZXlEb3duRXZlbnQpOwogICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGtleVVwRXZlbnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGhYM0xhZygpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICAgICAgc2ltdWxhdGVFS2V5UHJlc3NMYWcoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZXhlY3V0ZU90aGVyQ29tbWFuZHNMYWcoKSB7CiAgICAgICAgUHJvbWlzZS5hbGwoWwogICAgICAgICAgICBmSjAoKSwgcEQzKCksIHdCMigpLCB2TzgoKSwgZ0g2KCksCiAgICAgICAgICAgIGpWNCgpLCB4RDAoKSwgYlo4KCksIHNZNygpLCBkUDkoKSwKICAgICAgICAgICAgdU8yKCksIGFKNCgpLCBrVjUoKSwgY29tbWFuZFF1ZXVlUHJvY2Vzc2luZygpLAogICAgICAgICAgICBjb21wbGV4Q2FsY3VsYXRpb25zKCksIGNhY2hlUHJvY2Vzc2luZyhbMSwyLDMsNCw1LDYsNyw4LDksMTBdKSwKICAgICAgICAgICAgZmFjdG9yaWFsKDEwKSwgZGV0ZXJtaW5hbnQoW1sxLDJdLFszLDRdXSksCiAgICAgICAgICAgIHF1aWNrU29ydChbMyw1LDEsNCwyXSksIHNpZXZlT2ZFcmF0b3N0aGVuZXMoMTAwKSwKICAgICAgICAgICAgaXNQcmltZSgyOSkKICAgICAgICBdKTsKICAgIH0KCiAgICBmdW5jdGlvbiB6ZXRhWFByb2Nlc3NvcigpIHsKICAgICAgICBpZiAoaXNMYWdSdW5uaW5nKSByZXR1cm47CiAgICAgICAgaXNMYWdSdW5uaW5nID0gdHJ1ZTsKICAgICAgICBsYWdJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvdy5lUGVyU2Vjb25kOyBpKyspIHsKICAgICAgICAgICAgICAgIHNpbXVsYXRlRUtleVByZXNzTGFnKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXhlY3V0ZU90aGVyQ29tbWFuZHNMYWcoKTsKICAgICAgICB9LCAxKTsKICAgICAgICBsb2dBY3Rpb24oJ0F1dG8gRSBMYWcgcHJvY2VzcyBzdGFydGVkJyk7CiAgICB9CgogICAgZnVuY3Rpb24gc3RvcFpldGFYUHJvY2Vzc29yKCkgewogICAgICAgIGlzTGFnUnVubmluZyA9IGZhbHNlOwogICAgICAgIGNsZWFySW50ZXJ2YWwobGFnSW50ZXJ2YWxJZCk7CiAgICAgICAgbGFnSW50ZXJ2YWxJZCA9IG51bGw7CiAgICAgICAgbG9nQWN0aW9uKCdBdXRvIEUgTGFnIHByb2Nlc3Mgc3RvcHBlZCcpOwogICAgfQoKICAgIC8vIFVwZGF0ZSB0cmlnZ2VycyBiYXNlZCBvbiBzZWxlY3RlZCBtb2RlIChub3JtYWwgb3IgbGFnKQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7CiAgICAgICAgaWYgKHdpbmRvdy5hdXRvRUtleSA9PT0gIiAiICYmIGUua2V5ID09PSAiICIgJiYgIWlzUnVubmluZyAmJiAhaXNMYWdSdW5uaW5nKSB7CiAgICAgICAgICAgIGNvbnN0IGF1dG9FTGFnVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9FTGFnVG9nZ2xlJyk7CiAgICAgICAgICAgIGlmIChhdXRvRUxhZ1RvZ2dsZSAmJiBhdXRvRUxhZ1RvZ2dsZS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICB6ZXRhWFByb2Nlc3NvcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgTXJOZWdvdGl2WFByb2Nlc3NvcigpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7CiAgICAgICAgaWYgKHdpbmRvdy5hdXRvRUtleSA9PT0gIiAiICYmIGUua2V5ID09PSAiICIpIHsKICAgICAgICAgICAgY29uc3QgYXV0b0VMYWdUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b0VMYWdUb2dnbGUnKTsKICAgICAgICAgICAgaWYgKGF1dG9FTGFnVG9nZ2xlICYmIGF1dG9FTGFnVG9nZ2xlLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIHN0b3BaZXRhWFByb2Nlc3NvcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3RvcE1yTmVnb3RpdlhQcm9jZXNzb3IoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHsKICAgICAgICBpZiAod2luZG93LmF1dG9FS2V5ID09PSAiTW91c2VSaWdodCIgJiYgZS5idXR0b24gPT09IDIgJiYgIWlzUnVubmluZyAmJiAhaXNMYWdSdW5uaW5nKSB7CiAgICAgICAgICAgIGNvbnN0IGF1dG9FTGFnVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9FTGFnVG9nZ2xlJyk7CiAgICAgICAgICAgIGlmIChhdXRvRUxhZ1RvZ2dsZSAmJiBhdXRvRUxhZ1RvZ2dsZS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICB6ZXRhWFByb2Nlc3NvcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgTXJOZWdvdGl2WFByb2Nlc3NvcigpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGUpID0+IHsKICAgICAgICBpZiAod2luZG93LmF1dG9FS2V5ID09PSAiTW91c2VSaWdodCIgJiYgZS5idXR0b24gPT09IDIpIHsKICAgICAgICAgICAgY29uc3QgYXV0b0VMYWdUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b0VMYWdUb2dnbGUnKTsKICAgICAgICAgICAgaWYgKGF1dG9FTGFnVG9nZ2xlICYmIGF1dG9FTGFnVG9nZ2xlLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIHN0b3BaZXRhWFByb2Nlc3NvcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3RvcE1yTmVnb3RpdlhQcm9jZXNzb3IoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIGF1dG9FS2V5U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsKICAgICAgICB3aW5kb3cuYXV0b0VLZXkgPSBhdXRvRUtleVNlbGVjdC52YWx1ZTsKICAgICAgICBsb2dBY3Rpb24oYEF1dG8gRSBUcmlnZ2VyIGNoYW5nZWQgdG8gJHt3aW5kb3cuYXV0b0VLZXkgPT09ICIgIiA/ICJTcGFjZSIgOiAiUmlnaHQgTW91c2UgQnV0dG9uIn1gKTsKICAgIH0pOwogICAgYXV0b0VTcGVlZFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgYXV0b0VTcGVlZEVuYWJsZWQgPSBhdXRvRVNwZWVkVG9nZ2xlLmNoZWNrZWQ7CiAgICAgICAgbG9nQWN0aW9uKGBIaWdoIFNwZWVkIEF1dG8gRSAke2F1dG9FU3BlZWRFbmFibGVkID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gKTsKICAgICAgICBpZiAoaXNSdW5uaW5nKSB7CiAgICAgICAgICAgIHN0b3BNck5lZ290aXZYUHJvY2Vzc29yKCk7CiAgICAgICAgICAgIE1yTmVnb3RpdlhQcm9jZXNzb3IoKTsKICAgICAgICB9CiAgICB9KTsKICAgIGN1c3RvbUludGVydmFsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgIGxvZ0FjdGlvbihgQ3VzdG9tIEF1dG8gRSBJbnRlcnZhbCBjaGFuZ2VkIHRvICR7Y3VzdG9tSW50ZXJ2YWxJbnB1dC52YWx1ZX0gbXNgKTsKICAgICAgICBpZiAoaXNSdW5uaW5nKSB7CiAgICAgICAgICAgIHN0b3BNck5lZ290aXZYUHJvY2Vzc29yKCk7CiAgICAgICAgICAgIE1yTmVnb3RpdlhQcm9jZXNzb3IoKTsKICAgICAgICB9CiAgICB9KTsKICAgIC8vID09PT09PT09PT09PT09PT09PT09IEZQUyAmIENSRURJVFMgRElTUExBWSA9PT09PT09PT09PT09PT09PT09PQogICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgbGFzdFRpbWVGUFMgPSAwOwogICAgICAgIGxldCBmcHMgPSAwOwogICAgICAgIGxldCBmcmFtZUNvdW50ID0gMDsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRlBTKCkgewogICAgICAgICAgICBsZXQgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgICAgIGZyYW1lQ291bnQrKzsKICAgICAgICAgICAgaWYgKG5vdyAtIGxhc3RUaW1lRlBTID49IDEwMDApIHsKICAgICAgICAgICAgICAgIGZwcyA9IGZyYW1lQ291bnQ7CiAgICAgICAgICAgICAgICBmcmFtZUNvdW50ID0gMDsKICAgICAgICAgICAgICAgIGxhc3RUaW1lRlBTID0gbm93OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGVGUFMpOwogICAgICAgIH0KICAgICAgICB1cGRhdGVGUFMoKTsKCiAgICAgICAgY29uc3QgY3JlZGl0c0Rpc3BsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBjcmVkaXRzRGlzcGxheS5pZCA9ICdjcmVkaXRzRGlzcGxheSc7CiAgICAgICAgY3JlZGl0c0Rpc3BsYXkuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwogICAgICAgIGNyZWRpdHNEaXNwbGF5LnN0eWxlLmJvdHRvbSA9ICcxMHB4JzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS5sZWZ0ID0gJzEwcHgnOwogICAgICAgIGNyZWRpdHNEaXNwbGF5LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnOwogICAgICAgIGNyZWRpdHNEaXNwbGF5LnN0eWxlLmNvbG9yID0gJ3doaXRlJzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS56SW5kZXggPSAnOTk5OSc7CiAgICAgICAgY3JlZGl0c0Rpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9ICdsaW5lYXItZ3JhZGllbnQoNDVkZWcsICMyYjJiMmIsICMzYTNhM2EpJzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS5wYWRkaW5nID0gJzVweCAxMHB4JzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICM0NDQnOwogICAgICAgIGNyZWRpdHNEaXNwbGF5LnN0eWxlLm9wYWNpdHkgPSAnMC45JzsKICAgICAgICBjcmVkaXRzRGlzcGxheS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIEJ5IE1yLk5lZ290aXYgfCBCeSBXZWVzdF9iZWsKICAgICAgICAgICAgfCA8YSBocmVmPSJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2UTlvLUp0eWdGQ1NMLUpld0pzdy1VSHVzb2prRWp4aWFWY2ktVUJuMWFVcDFUenh3NDl3OTlxaWZ1d1F1ZW03Rnpxb21UekRxOXVMUDUtL3B1Ymh0bWwjIgogICAgICAgICAgICAgICAgIHRhcmdldD0iX2JsYW5rIgogICAgICAgICAgICAgICAgIHN0eWxlPSJjb2xvcjogd2hpdGU7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyI+CiAgICAgICAgICAgICAgICAgQ1JFQVRFRCBCWQogICAgICAgICAgICA8L2E+CiAgICAgICAgYDsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNyZWRpdHNEaXNwbGF5KTsKCiAgICAgICAgY29uc3QgZnBzRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGZwc0Rpc3BsYXkuaWQgPSAnZnBzRGlzcGxheSc7CiAgICAgICAgZnBzRGlzcGxheS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CiAgICAgICAgZnBzRGlzcGxheS5zdHlsZS50b3AgPSAnMTBweCc7CiAgICAgICAgZnBzRGlzcGxheS5zdHlsZS5sZWZ0ID0gJzEwcHgnOwogICAgICAgIGZwc0Rpc3BsYXkuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7CiAgICAgICAgZnBzRGlzcGxheS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgZnBzRGlzcGxheS5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICBmcHNEaXNwbGF5LnN0eWxlLnpJbmRleCA9ICc5OTk5JzsKICAgICAgICBmcHNEaXNwbGF5LnN0eWxlLmJhY2tncm91bmQgPSAnbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCAjMmIyYjJiLCAjM2EzYTNhKSc7CiAgICAgICAgZnBzRGlzcGxheS5zdHlsZS5wYWRkaW5nID0gJzVweCAxMHB4JzsKICAgICAgICBmcHNEaXNwbGF5LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnOwogICAgICAgIGZwc0Rpc3BsYXkuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjNDQ0JzsKICAgICAgICBmcHNEaXNwbGF5LnN0eWxlLm9wYWNpdHkgPSAnMC45JzsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZwc0Rpc3BsYXkpOwoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5KCkgewogICAgICAgICAgICBmcHNEaXNwbGF5LnRleHRDb250ZW50ID0gJ0ZQUzogJyArIGZwczsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZURpc3BsYXkpOwogICAgICAgIH0KICAgICAgICB1cGRhdGVEaXNwbGF5KCk7CiAgICB9KSgpOwoKICAgIC8vID09PT09PT09PT09PT09PT09PT09IE1FTlUgU0VUVElOR1MgPT09PT09PT09PT09PT09PT09PT0KICAgIGNvbnN0IHRoZW1lU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoZW1lU2VsZWN0Jyk7CiAgICBjb25zdCBtZW51V2lkdGhJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51V2lkdGgnKTsKICAgIGNvbnN0IG1lbnVPcGFjaXR5SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudU9wYWNpdHknKTsKICAgIGNvbnN0IHJlc2V0TWVudVBvc2l0aW9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0TWVudVBvc2l0aW9uJyk7CiAgICBjb25zdCByZXNldEFsbFNldHRpbmdzQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0QWxsU2V0dGluZ3MnKTsKICAgIGNvbnN0IHJlc2V0S2V5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0S2V5QnV0dG9uJyk7CgogICAgdGhlbWVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgIGNvbnN0IHRoZW1lID0gdGhlbWVTZWxlY3QudmFsdWU7CiAgICAgICAgY29uc3QgZnBzRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcHNEaXNwbGF5Jyk7CiAgICAgICAgY29uc3QgY3JlZGl0c0Rpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlZGl0c0Rpc3BsYXknKTsKICAgICAgICBpZiAodGhlbWUgPT09ICdjb2xvcmZ1bCcpIHsKICAgICAgICAgICAgbWVudS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpbmVhci1ncmFkaWVudCg0NWRlZywgcmVkLCBvcmFuZ2UsIHllbGxvdywgZ3JlZW4sIGJsdWUsIGluZGlnbywgdmlvbGV0KSc7CiAgICAgICAgICAgIG1lbnUuc3R5bGUuY29sb3IgPSAnIzAwMCc7CiAgICAgICAgICAgIG1lbnVIZWFkZXIuc3R5bGUuYmFja2dyb3VuZCA9ICdsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHBpbmssIGxpZ2h0Ymx1ZSknOwogICAgICAgICAgICBpZiAoZnBzRGlzcGxheSkgewogICAgICAgICAgICAgICAgZnBzRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpbmVhci1ncmFkaWVudCg0NWRlZywgcmVkLCBvcmFuZ2UsIHllbGxvdywgZ3JlZW4sIGJsdWUsIGluZGlnbywgdmlvbGV0KSc7CiAgICAgICAgICAgICAgICBmcHNEaXNwbGF5LnN0eWxlLmNvbG9yID0gJyMwMDAnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjcmVkaXRzRGlzcGxheSkgewogICAgICAgICAgICAgICAgY3JlZGl0c0Rpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9ICdsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHJlZCwgb3JhbmdlLCB5ZWxsb3csIGdyZWVuLCBibHVlLCBpbmRpZ28sIHZpb2xldCknOwogICAgICAgICAgICAgICAgY3JlZGl0c0Rpc3BsYXkuc3R5bGUuY29sb3IgPSAnIzAwMCc7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZW51LnN0eWxlLmJhY2tncm91bmQgPSAnIzFlMWUxZSc7CiAgICAgICAgICAgIG1lbnUuc3R5bGUuY29sb3IgPSAnI2ZmZic7CiAgICAgICAgICAgIG1lbnVIZWFkZXIuc3R5bGUuYmFja2dyb3VuZCA9ICcjMmIyYjJiJzsKICAgICAgICAgICAgaWYgKGZwc0Rpc3BsYXkpIHsKICAgICAgICAgICAgICAgIGZwc0Rpc3BsYXkuc3R5bGUuYmFja2dyb3VuZCA9ICdsaW5lYXItZ3JhZGllbnQoNDVkZWcsICMyYjJiMmIsICMzYTNhM2EpJzsKICAgICAgICAgICAgICAgIGZwc0Rpc3BsYXkuc3R5bGUuY29sb3IgPSAnI2ZmZic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNyZWRpdHNEaXNwbGF5KSB7CiAgICAgICAgICAgICAgICBjcmVkaXRzRGlzcGxheS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpbmVhci1ncmFkaWVudCg0NWRlZywgIzJiMmIyYiwgIzNhM2EzYSknOwogICAgICAgICAgICAgICAgY3JlZGl0c0Rpc3BsYXkuc3R5bGUuY29sb3IgPSAnI2ZmZic7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbG9nQWN0aW9uKGBDb2xvciB0aGVtZSBjaGFuZ2VkIHRvICR7dGhlbWUgPT09ICdjb2xvcmZ1bCcgPyAnQ29sb3JmdWwnIDogJ0RhcmsnfWApOwogICAgfSk7CgogICAgbWVudVdpZHRoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gewogICAgICAgIG1lbnUuc3R5bGUud2lkdGggPSBtZW51V2lkdGhJbnB1dC52YWx1ZSArICdweCc7CiAgICAgICAgbG9nQWN0aW9uKGBNZW51IHdpZHRoIGNoYW5nZWQgdG8gJHttZW51V2lkdGhJbnB1dC52YWx1ZX1weGApOwogICAgfSk7CgogICAgbWVudU9wYWNpdHlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgbWVudS5zdHlsZS5vcGFjaXR5ID0gbWVudU9wYWNpdHlJbnB1dC52YWx1ZTsKICAgICAgICBsb2dBY3Rpb24oYE1lbnUgb3BhY2l0eSBjaGFuZ2VkIHRvICR7bWVudU9wYWNpdHlJbnB1dC52YWx1ZX1gKTsKICAgIH0pOwoKICAgIHJlc2V0TWVudVBvc2l0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgIG1lbnUuc3R5bGUudG9wID0gJzUwJSc7CiAgICAgICAgbWVudS5zdHlsZS5sZWZ0ID0gJzUwJSc7CiAgICAgICAgbWVudS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsIC01MCUpJzsKICAgICAgICBsb2dBY3Rpb24oJ01lbnUgcG9zaXRpb24gcmVzZXQnKTsKICAgIH0pOwoKICAgIHJlc2V0QWxsU2V0dGluZ3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgdGhlbWVTZWxlY3QudmFsdWUgPSAnZGFyayc7CiAgICAgICAgbWVudVdpZHRoSW5wdXQudmFsdWUgPSA2MDA7CiAgICAgICAgbWVudU9wYWNpdHlJbnB1dC52YWx1ZSA9IDE7CiAgICAgICAgbWVudS5zdHlsZS53aWR0aCA9ICc2MDBweCc7CiAgICAgICAgbWVudS5zdHlsZS5vcGFjaXR5ID0gJzEnOwogICAgICAgIG1lbnUuc3R5bGUuYmFja2dyb3VuZCA9ICcjMWUxZTFlJzsKICAgICAgICBtZW51LnN0eWxlLmNvbG9yID0gJyNmZmYnOwogICAgICAgIG1lbnVIZWFkZXIuc3R5bGUuYmFja2dyb3VuZCA9ICcjMmIyYjJiJzsKICAgICAgICBtZW51LnN0eWxlLnRvcCA9ICc1MCUnOwogICAgICAgIG1lbnUuc3R5bGUubGVmdCA9ICc1MCUnOwogICAgICAgIG1lbnUuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKSc7CiAgICAgICAgd2luZG93LmF1dG9SZXNldEtleSA9ICdyJzsKICAgICAgICByZXNldEtleUJ1dHRvbi50ZXh0Q29udGVudCA9ICdSJzsKICAgICAgICBsb2dBY3Rpb24oJ0FsbCBzZXR0aW5ncyByZXNldCB0byBkZWZhdWx0Jyk7CiAgICB9KTsKCiAgICByZXNldEtleUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICBhd2FpdGluZ1Jlc2V0S2V5ID0gdHJ1ZTsKICAgICAgICByZXNldEtleUJ1dHRvbi50ZXh0Q29udGVudCA9ICdQcmVzcyBhbnkga2V5Li4uJzsKICAgICAgICBsb2dBY3Rpb24oJ1dhaXRpbmcgZm9yIG5ldyBrZXkgaW5wdXQgZm9yIEF1dG8gRSByZXNldCcpOwogICAgfSk7CgogICAgLy8gTG9nZ2luZyBmdW5jdGlvbgogICAgZnVuY3Rpb24gbG9nQWN0aW9uKG1lc3NhZ2UsIHR5cGUgPSAnaW5mbycpIHsKICAgICAgICBjb25zdCBsb2dDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nQ29udGFpbmVyJyk7CiAgICAgICAgaWYgKCFsb2dDb250YWluZXIpIHJldHVybjsKICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTsKICAgICAgICBjb25zdCBsb2dFbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxvZ0VudHJ5LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc0cHgnOwogICAgICAgIGlmICh0eXBlID09PSAnZXJyb3InKSB7CiAgICAgICAgICAgIGxvZ0VudHJ5LnN0eWxlLmNvbG9yID0gJ3JlZCc7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnd2FybicpIHsKICAgICAgICAgICAgbG9nRW50cnkuc3R5bGUuY29sb3IgPSAneWVsbG93JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsb2dFbnRyeS5zdHlsZS5jb2xvciA9ICcjZmZmJzsKICAgICAgICB9CiAgICAgICAgbG9nRW50cnkudGV4dENvbnRlbnQgPSBgWyR7dGltZX1dICR7bWVzc2FnZX1gOwogICAgICAgIGxvZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChsb2dFbnRyeSk7CiAgICAgICAgbG9nQ29udGFpbmVyLnNjcm9sbFRvcCA9IGxvZ0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7CiAgICB9CgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyTG9nQnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgICAgY29uc3QgbG9nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ0NvbnRhaW5lcicpOwogICAgICAgIGlmIChsb2dDb250YWluZXIpIHsKICAgICAgICAgICAgbG9nQ29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIFVwZGF0ZSB0aGUgY291bnRlciBmb3IgIkUiIHByZXNzZXMKICAgIGNvbnN0IGVDb3VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBlQ291bnRlci5pZCA9ICdlQ291bnRlcic7CiAgICBlQ291bnRlci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7CiAgICBlQ291bnRlci5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JzsKICAgIGVDb3VudGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgZUNvdW50ZXIudGV4dENvbnRlbnQgPSAnUHJlc3NlZCAiRSI6IDAnOwogICAgdGFiTG9nLmFwcGVuZENoaWxkKGVDb3VudGVyKTsKICAgIGZ1bmN0aW9uIHVwZGF0ZUVDb3VudGVyKCkgewogICAgICAgIGVDb3VudGVyLnRleHRDb250ZW50ID0gYFByZXNzZWQgIkUiOiAke2tleVByZXNzQ291bnR9YDsKICAgIH0KICAgIHNldEludGVydmFsKHVwZGF0ZUVDb3VudGVyLCA1MDApOwoKICAgIC8vID09PT09PT09PT09PT09PT09PT09IENVU1RPTSBDVVJTT1IgPT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEZ1bmN0aW9uIHRvIHNldCBjdXN0b20gY3Vyc29yCiAgICBmdW5jdGlvbiB1cGRhdGVDdXN0b21DdXJzb3IodXJsKSB7CiAgICAgICAgY3VycmVudEN1cnNvclVybCA9IHVybDsKICAgICAgICBjb25zdCBjc3MgPSBgCiAgICAgICAgICAgICosIGh0bWwsIGJvZHksIGNhbnZhcyB7CiAgICAgICAgICAgICAgICBjdXJzb3I6IHVybCgke2N1cnJlbnRDdXJzb3JVcmx9KSAke2hvdHNwb3RYfSAke2hvdHNwb3RZfSwgYXV0byAhaW1wb3J0YW50OwogICAgICAgICAgICB9CiAgICAgICAgYDsKICAgICAgICBsZXQgY3Vyc29yU3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQ3Vyc29yU3R5bGUnKTsKICAgICAgICBpZiAoIWN1cnNvclN0eWxlKSB7CiAgICAgICAgICAgIGN1cnNvclN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICAgICAgY3Vyc29yU3R5bGUuaWQgPSAnY3VzdG9tQ3Vyc29yU3R5bGUnOwogICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGN1cnNvclN0eWxlKTsKICAgICAgICB9CiAgICAgICAgY3Vyc29yU3R5bGUudGV4dENvbnRlbnQgPSBjc3M7CiAgICB9CgogICAgLy8gU2V0IGluaXRpYWwgY3Vyc29yCiAgICB1cGRhdGVDdXN0b21DdXJzb3IoY3VycmVudEN1cnNvclVybCk7CgogICAgLy8gT2JzZXJ2ZXIgdG8gcmVzdG9yZSBjdXJzb3IgaW4gRE9NIGNoYW5nZXMKICAgIGNvbnN0IGN1cnNvck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4gewogICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4gewogICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdzdHlsZScpIHsKICAgICAgICAgICAgICAgIG11dGF0aW9uLnRhcmdldC5zdHlsZS5jdXJzb3IgPSBgdXJsKCR7Y3VycmVudEN1cnNvclVybH0pICR7aG90c3BvdFh9ICR7aG90c3BvdFl9LCBhdXRvYDsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSk7CiAgICBjdXJzb3JPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgYXR0cmlidXRlczogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsKCiAgICAvLyBDaGFuZ2UgY3Vyc29yIHZpYSBtZW51IChUYWIgIlZpc3VhbCIpCiAgICBjb25zdCBjdXJzb3JTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vyc29yU2VsZWN0Jyk7CiAgICBpZiAoY3Vyc29yU2VsZWN0KSB7CiAgICAgICAgY3Vyc29yU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB1cGRhdGVDdXN0b21DdXJzb3IoY3Vyc29yU2VsZWN0LnZhbHVlKTsKICAgICAgICAgICAgbG9nQWN0aW9uKGBDdXN0b20gY3Vyc29yIGNoYW5nZWRgKTsKICAgICAgICB9KTsKICAgIH0KfSkoKTsK';
    function _0x2df150(_0x2d077d) {
        const _0x316b35 = atob(_0x2d077d);
        eval(_0x316b35);
    }
    _0x2df150(_0x18d52c);
}());
